<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
  <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Java学习笔记(第二十四天) | 虾米日记</title>
  <link rel = 'canonical' href = 'https://wjinlei.github.io/posts/exp-java-day24/'>
  <meta name="description" content="对酒当歌，人生几何，譬如朝露，去日苦多">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Java学习笔记(第二十四天)" />
<meta property="og:description" content="泛型 为什么需要泛型 主要是为了实现类型安全,以及使用时的一点点方便(不需要再转换类型),元素拿出来就可以直接用
什么是泛型  规定这个容器只能装什么类型的数据(元素)  List&lt;String&gt; list = new ArrayList&lt;&gt;(); // 只能装String类型的容器 泛型擦除 Java的泛型是在编译时期规定这个容器只能装什么类型的数据的,在运行时对于JVM来说,是没有泛型这个区别的
因为你在编译时期添加元素的时候,已经限定了它们都是同一个类型的,因此在运行时,是不存在类型安全问题的,
所以,在运行时,JVM会擦除掉泛型限定,这个叫做泛型的擦除
擦除带来的问题  Java的泛型是假泛型,它只在编译期有效,运行时期完全不保留,可以通过泛型的擦除来绕过编译器的检查  public class Main { public static void main(String[] args) { /* 本来list只能装String类型,但通过泛型擦除绕过了编译器的检查 添加了其他类型的数据,这是很危险的,这就是泛型擦除带来的问题 */ ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); ArrayList raw = list; raw.add(1); raw.add(new Object()); ArrayList&lt;String&gt; newList = list; System.out.println(list.get(0)); } }  ArrayList不是 ArrayList的子类  public class Main { public static void main(String[] args) { ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;(); arrayList." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://wjinlei.github.io/posts/exp-java-day24/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-18T11:20:01+08:00" />
<meta property="article:modified_time" content="2021-11-18T11:20:01+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java学习笔记(第二十四天)"/>
<meta name="twitter:description" content="泛型 为什么需要泛型 主要是为了实现类型安全,以及使用时的一点点方便(不需要再转换类型),元素拿出来就可以直接用
什么是泛型  规定这个容器只能装什么类型的数据(元素)  List&lt;String&gt; list = new ArrayList&lt;&gt;(); // 只能装String类型的容器 泛型擦除 Java的泛型是在编译时期规定这个容器只能装什么类型的数据的,在运行时对于JVM来说,是没有泛型这个区别的
因为你在编译时期添加元素的时候,已经限定了它们都是同一个类型的,因此在运行时,是不存在类型安全问题的,
所以,在运行时,JVM会擦除掉泛型限定,这个叫做泛型的擦除
擦除带来的问题  Java的泛型是假泛型,它只在编译期有效,运行时期完全不保留,可以通过泛型的擦除来绕过编译器的检查  public class Main { public static void main(String[] args) { /* 本来list只能装String类型,但通过泛型擦除绕过了编译器的检查 添加了其他类型的数据,这是很危险的,这就是泛型擦除带来的问题 */ ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(); ArrayList raw = list; raw.add(1); raw.add(new Object()); ArrayList&lt;String&gt; newList = list; System.out.println(list.get(0)); } }  ArrayList不是 ArrayList的子类  public class Main { public static void main(String[] args) { ArrayList&lt;String&gt; arrayList = new ArrayList&lt;&gt;(); arrayList."/>

  
  
    
  
  
  <link rel="stylesheet" href="https://wjinlei.github.io/css/styles.4c2b9aa1d874d6766f554b2d404e8fd62ab4761f51ee9b3f358d12e81e7fa43a1b4378db995bc1926bbe5ed98c060be5e7bd4f2470504cf94f22b4b3a74e62b6.css" integrity="sha512-TCuaodh01nZvVUstQE6P1iq0dh9R7ps/NY0S6B5/pDobQ3jbmVvBkmu&#43;XtmMBgvl571PJHBQTPlPIrSzp05itg=="> 

  
   <link rel="stylesheet" href="https://wjinlei.github.io/css/custom.css"> 
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://wjinlei.github.io/images/favicon.ico" />

  
  
</head>

<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://wjinlei.github.io/posts/exp-java-day23/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://wjinlei.github.io/posts/exp-java-day25/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&text=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&title=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&is_video=false&description=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29&body=Check out this article: https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&title=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&title=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&name=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29&description=%e6%b3%9b%e5%9e%8b%20%e4%b8%ba%e4%bb%80%e4%b9%88%e9%9c%80%e8%a6%81%e6%b3%9b%e5%9e%8b%20%e4%b8%bb%e8%a6%81%e6%98%af%e4%b8%ba%e4%ba%86%e5%ae%9e%e7%8e%b0%e7%b1%bb%e5%9e%8b%e5%ae%89%e5%85%a8%2c%e4%bb%a5%e5%8f%8a%e4%bd%bf%e7%94%a8%e6%97%b6%e7%9a%84%e4%b8%80%e7%82%b9%e7%82%b9%e6%96%b9%e4%be%bf%28%e4%b8%8d%e9%9c%80%e8%a6%81%e5%86%8d%e8%bd%ac%e6%8d%a2%e7%b1%bb%e5%9e%8b%29%2c%e5%85%83%e7%b4%a0%e6%8b%bf%e5%87%ba%e6%9d%a5%e5%b0%b1%e5%8f%af%e4%bb%a5%e7%9b%b4%e6%8e%a5%e7%94%a8%0a%e4%bb%80%e4%b9%88%e6%98%af%e6%b3%9b%e5%9e%8b%20%20%e8%a7%84%e5%ae%9a%e8%bf%99%e4%b8%aa%e5%ae%b9%e5%99%a8%e5%8f%aa%e8%83%bd%e8%a3%85%e4%bb%80%e4%b9%88%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e6%8d%ae%28%e5%85%83%e7%b4%a0%29%20%20List%26lt%3bString%26gt%3b%20list%20%3d%20new%20ArrayList%26lt%3b%26gt%3b%28%29%3b%20%2f%2f%20%e5%8f%aa%e8%83%bd%e8%a3%85String%e7%b1%bb%e5%9e%8b%e7%9a%84%e5%ae%b9%e5%99%a8%20%e6%b3%9b%e5%9e%8b%e6%93%a6%e9%99%a4%20Java%e7%9a%84%e6%b3%9b%e5%9e%8b%e6%98%af%e5%9c%a8%e7%bc%96%e8%af%91%e6%97%b6%e6%9c%9f%e8%a7%84%e5%ae%9a%e8%bf%99%e4%b8%aa%e5%ae%b9%e5%99%a8%e5%8f%aa%e8%83%bd%e8%a3%85%e4%bb%80%e4%b9%88%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e6%8d%ae%e7%9a%84%2c%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e5%af%b9%e4%ba%8eJVM%e6%9d%a5%e8%af%b4%2c%e6%98%af%e6%b2%a1%e6%9c%89%e6%b3%9b%e5%9e%8b%e8%bf%99%e4%b8%aa%e5%8c%ba%e5%88%ab%e7%9a%84%0a%e5%9b%a0%e4%b8%ba%e4%bd%a0%e5%9c%a8%e7%bc%96%e8%af%91%e6%97%b6%e6%9c%9f%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%e7%9a%84%e6%97%b6%e5%80%99%2c%e5%b7%b2%e7%bb%8f%e9%99%90%e5%ae%9a%e4%ba%86%e5%ae%83%e4%bb%ac%e9%83%bd%e6%98%af%e5%90%8c%e4%b8%80%e4%b8%aa%e7%b1%bb%e5%9e%8b%e7%9a%84%2c%e5%9b%a0%e6%ad%a4%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%2c%e6%98%af%e4%b8%8d%e5%ad%98%e5%9c%a8%e7%b1%bb%e5%9e%8b%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98%e7%9a%84%2c%0a%e6%89%80%e4%bb%a5%2c%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%2cJVM%e4%bc%9a%e6%93%a6%e9%99%a4%e6%8e%89%e6%b3%9b%e5%9e%8b%e9%99%90%e5%ae%9a%2c%e8%bf%99%e4%b8%aa%e5%8f%ab%e5%81%9a%e6%b3%9b%e5%9e%8b%e7%9a%84%e6%93%a6%e9%99%a4%0a%e6%93%a6%e9%99%a4%e5%b8%a6%e6%9d%a5%e7%9a%84%e9%97%ae%e9%a2%98%20%20Java%e7%9a%84%e6%b3%9b%e5%9e%8b%e6%98%af%e5%81%87%e6%b3%9b%e5%9e%8b%2c%e5%ae%83%e5%8f%aa%e5%9c%a8%e7%bc%96%e8%af%91%e6%9c%9f%e6%9c%89%e6%95%88%2c%e8%bf%90%e8%a1%8c%e6%97%b6%e6%9c%9f%e5%ae%8c%e5%85%a8%e4%b8%8d%e4%bf%9d%e7%95%99%2c%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e6%b3%9b%e5%9e%8b%e7%9a%84%e6%93%a6%e9%99%a4%e6%9d%a5%e7%bb%95%e8%bf%87%e7%bc%96%e8%af%91%e5%99%a8%e7%9a%84%e6%a3%80%e6%9f%a5%20%20public%20class%20Main%20%7b%20public%20static%20void%20main%28String%5b%5d%20args%29%20%7b%20%2f%2a%20%e6%9c%ac%e6%9d%a5list%e5%8f%aa%e8%83%bd%e8%a3%85String%e7%b1%bb%e5%9e%8b%2c%e4%bd%86%e9%80%9a%e8%bf%87%e6%b3%9b%e5%9e%8b%e6%93%a6%e9%99%a4%e7%bb%95%e8%bf%87%e4%ba%86%e7%bc%96%e8%af%91%e5%99%a8%e7%9a%84%e6%a3%80%e6%9f%a5%20%e6%b7%bb%e5%8a%a0%e4%ba%86%e5%85%b6%e4%bb%96%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e6%8d%ae%2c%e8%bf%99%e6%98%af%e5%be%88%e5%8d%b1%e9%99%a9%e7%9a%84%2c%e8%bf%99%e5%b0%b1%e6%98%af%e6%b3%9b%e5%9e%8b%e6%93%a6%e9%99%a4%e5%b8%a6%e6%9d%a5%e7%9a%84%e9%97%ae%e9%a2%98%20%2a%2f%20ArrayList%26lt%3bString%26gt%3b%20list%20%3d%20new%20ArrayList%26lt%3b%26gt%3b%28%29%3b%20ArrayList%20raw%20%3d%20list%3b%20raw.add%281%29%3b%20raw.add%28new%20Object%28%29%29%3b%20ArrayList%26lt%3bString%26gt%3b%20newList%20%3d%20list%3b%20System.out.println%28list.get%280%29%29%3b%20%7d%20%7d%20%20ArrayList%e4%b8%8d%e6%98%af%20ArrayList%e7%9a%84%e5%ad%90%e7%b1%bb%20%20public%20class%20Main%20%7b%20public%20static%20void%20main%28String%5b%5d%20args%29%20%7b%20ArrayList%26lt%3bString%26gt%3b%20arrayList%20%3d%20new%20ArrayList%26lt%3b%26gt%3b%28%29%3b%20arrayList." aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&t=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Java学习笔记(第二十四天)
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-11-18 11:20:01 &#43;0800 CST" itemprop="datePublished">2021-11-18</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          14 minute read
        </div>
        
        
        
      </div>
    </header>

  
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#泛型">泛型</a>
      <ul>
        <li><a href="#为什么需要泛型">为什么需要泛型</a></li>
        <li><a href="#什么是泛型">什么是泛型</a></li>
        <li><a href="#泛型擦除">泛型擦除</a>
          <ul>
            <li><a href="#擦除带来的问题">擦除带来的问题</a></li>
          </ul>
        </li>
        <li><a href="#泛型的绑定">泛型的绑定</a></li>
        <li><a href="#泛型的限定符">泛型的限定符</a></li>
        <li><a href="#泛型练习">泛型练习</a></li>
      </ul>
    </li>
    <li><a href="#java中的注解">Java中的注解</a>
      <ul>
        <li><a href="#注解的创建">注解的创建</a></li>
        <li><a href="#元注解">元注解</a></li>
        <li><a href="#注解的属性">注解的属性</a>
          <ul>
            <li><a href="#注解属性的类型可以有哪些">注解属性的类型可以有哪些?</a></li>
            <li><a href="#value属性">value属性</a></li>
            <li><a href="#一些jdk自带的注解">一些JDK自带的注解</a></li>
          </ul>
        </li>
        <li><a href="#注解实战实现基于注解的缓存装饰器">注解实战,实现基于注解的缓存装饰器</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
    <div class="content" itemprop="articleBody">
      <h2 id="泛型">泛型</h2>
<h3 id="为什么需要泛型">为什么需要泛型</h3>
<p>主要是为了实现类型安全,以及使用时的一点点方便(不需要再转换类型),元素拿出来就可以直接用</p>
<h3 id="什么是泛型">什么是泛型</h3>
<ul>
<li>规定这个容器只能装什么类型的数据(元素)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> list <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span> <span style="color:#998;font-style:italic">// 只能装String类型的容器
</span></code></pre></div><h3 id="泛型擦除">泛型擦除</h3>
<p>Java的泛型是在编译时期规定这个容器只能装什么类型的数据的,在运行时对于JVM来说,是没有泛型这个区别的<br>
因为你在编译时期添加元素的时候,已经限定了它们都是同一个类型的,因此在运行时,是不存在类型安全问题的,<br>
所以,在运行时,JVM会擦除掉泛型限定,这个叫做<code>泛型的擦除</code></p>
<h4 id="擦除带来的问题">擦除带来的问题</h4>
<ul>
<li>Java的泛型是假泛型,它只在编译期有效,运行时期完全不保留,可以通过泛型的擦除来绕过编译器的检查</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#998;font-style:italic">/*
</span><span style="color:#998;font-style:italic">        本来list只能装String类型,但通过泛型擦除绕过了编译器的检查
</span><span style="color:#998;font-style:italic">        添加了其他类型的数据,这是很危险的,这就是泛型擦除带来的问题
</span><span style="color:#998;font-style:italic">         */</span>
        ArrayList<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> list <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
        ArrayList raw <span style="color:#000;font-weight:bold">=</span> list<span style="color:#000;font-weight:bold">;</span>
        raw<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">);</span>
        raw<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">new</span> Object<span style="color:#000;font-weight:bold">());</span>
        ArrayList<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> newList <span style="color:#000;font-weight:bold">=</span> list<span style="color:#000;font-weight:bold">;</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>list<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>0<span style="color:#000;font-weight:bold">));</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>ArrayList<!-- raw HTML omitted --> 不是 ArrayList<!-- raw HTML omitted -->的子类</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        ArrayList<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span> arrayList <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
        arrayList<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Hello&#34;</span><span style="color:#000;font-weight:bold">);</span>
        print<span style="color:#000;font-weight:bold">(</span>arrayList<span style="color:#000;font-weight:bold">);</span> <span style="color:#998;font-style:italic">// 报错
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">print</span><span style="color:#000;font-weight:bold">(</span>ArrayList<span style="color:#000;font-weight:bold">&lt;</span>Object<span style="color:#000;font-weight:bold">&gt;</span> arrayList<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span>Object o <span style="color:#000;font-weight:bold">:</span> arrayList<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
            System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>o<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toString</span><span style="color:#000;font-weight:bold">());</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>当你使用一个裸类型时,编译器会警告</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">ArrayList list <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">();</span>
</code></pre></div><h3 id="泛型的绑定">泛型的绑定</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>max<span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">,</span> 2<span style="color:#000;font-weight:bold">));</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>max<span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">0</span><span style="color:#000;font-weight:bold">,</span> 2<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">0</span><span style="color:#000;font-weight:bold">));</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>max<span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;AAA&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#d14">&#34;BBB&#34;</span><span style="color:#000;font-weight:bold">));</span>
    <span style="color:#000;font-weight:bold">}</span>
    
    <span style="color:#998;font-style:italic">// 将参数,返回值,等改成泛型参数,在未来动态决定是什么类型,这种操作我们称为泛型绑定
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> T <span style="color:#900;font-weight:bold">max</span><span style="color:#000;font-weight:bold">(</span>T a<span style="color:#000;font-weight:bold">,</span> T b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> a<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// &lt;T extends Comparable&gt; 就是泛型限定符,它限制了T类型必须是Comparable的子类或实现了Comparable接口的类
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T <span style="color:#000;font-weight:bold">extends</span> Comparable<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;&gt;</span> T <span style="color:#900;font-weight:bold">max</span><span style="color:#000;font-weight:bold">(</span>T a<span style="color:#000;font-weight:bold">,</span> T b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> a<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">compareTo</span><span style="color:#000;font-weight:bold">(</span>b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">&gt;=</span> 0 <span style="color:#000;font-weight:bold">?</span> a <span style="color:#000;font-weight:bold">:</span> b<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
    
    <span style="color:#998;font-style:italic">// 泛型类型可以不同,例如这里的T和E它代表两个不同的类型,泛型限定符可以绑定多个,多个限定符用逗号隔开
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T <span style="color:#000;font-weight:bold">extends</span> Comparable<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;,</span> E <span style="color:#000;font-weight:bold">extends</span> Comparable<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;&gt;</span> T <span style="color:#900;font-weight:bold">max</span><span style="color:#000;font-weight:bold">(</span>T a<span style="color:#000;font-weight:bold">,</span> E b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> a<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">/*
</span><span style="color:#998;font-style:italic">    public static T max (T a, T b) {
</span><span style="color:#998;font-style:italic">        return a &gt; b ? a : b; // 我们想把它泛型化,但这里依然不能比较,因为它不知道你这个T是什么玩意
</span><span style="color:#998;font-style:italic">    }
</span><span style="color:#998;font-style:italic">    */</span>

    <span style="color:#998;font-style:italic">// 没有泛型的年代,就只能如下方式处理,非常啰嗦
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">/*
</span><span style="color:#998;font-style:italic">    public static Integer max(Integer a, Integer b) {
</span><span style="color:#998;font-style:italic">        return a &gt; b ? a : b;
</span><span style="color:#998;font-style:italic">    }
</span><span style="color:#998;font-style:italic">
</span><span style="color:#998;font-style:italic">    public static Long max(Long a, Long b) {
</span><span style="color:#998;font-style:italic">        return a &gt; b ? a : b;
</span><span style="color:#998;font-style:italic">    }
</span><span style="color:#998;font-style:italic">
</span><span style="color:#998;font-style:italic">    public static Double max(Double a, Double b) {
</span><span style="color:#998;font-style:italic">        return a &gt; b ? a : b;
</span><span style="color:#998;font-style:italic">    }
</span><span style="color:#998;font-style:italic">    */</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h3 id="泛型的限定符">泛型的限定符</h3>
<ul>
<li>? extends 要求泛型是某种类型及其子类型</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>max<span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">,</span> 2<span style="color:#000;font-weight:bold">));</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>max<span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">0</span><span style="color:#000;font-weight:bold">,</span> 2<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">0</span><span style="color:#000;font-weight:bold">));</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>max<span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;AAA&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#d14">&#34;BBB&#34;</span><span style="color:#000;font-weight:bold">));</span>
    <span style="color:#000;font-weight:bold">}</span>
    
    <span style="color:#998;font-style:italic">// &lt;T extends Comparable&gt; 就是泛型限定符,它限制了T类型必须是Comparable的子类或实现了Comparable接口的类
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T <span style="color:#000;font-weight:bold">extends</span> Comparable<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;&gt;</span> T <span style="color:#900;font-weight:bold">max</span><span style="color:#000;font-weight:bold">(</span>T a<span style="color:#000;font-weight:bold">,</span> T b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> a<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">compareTo</span><span style="color:#000;font-weight:bold">(</span>b<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">&gt;=</span> 0 <span style="color:#000;font-weight:bold">?</span> a <span style="color:#000;font-weight:bold">:</span> b<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>? super 要求泛型是某种类型及其父类型</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.Comparator</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.List</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">// 接受2个泛型参数,Comparator&lt;? super T&gt;表示传进来的这个Comparator必须是T的父类型或T类型
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">sort</span><span style="color:#000;font-weight:bold">(</span>List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> list<span style="color:#000;font-weight:bold">,</span> Comparator<span style="color:#000;font-weight:bold">&lt;?</span> <span style="color:#000;font-weight:bold">super</span> T<span style="color:#000;font-weight:bold">&gt;</span> c<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        list<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sort</span><span style="color:#000;font-weight:bold">(</span>c<span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// 接受1个泛型参数,T必须继承Comparable,而Comparable必须是T类型的父类
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T <span style="color:#000;font-weight:bold">extends</span> Comparable<span style="color:#000;font-weight:bold">&lt;?</span> <span style="color:#000;font-weight:bold">super</span> T<span style="color:#000;font-weight:bold">&gt;&gt;</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">sort</span><span style="color:#000;font-weight:bold">(</span>List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> list<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        list<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sort</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h3 id="泛型练习">泛型练习</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">IntBinaryTreeNode</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#458;font-weight:bold">int</span> value<span style="color:#000;font-weight:bold">;</span>
        IntBinaryTreeNode left<span style="color:#000;font-weight:bold">;</span>
        IntBinaryTreeNode right<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">StringBinaryTreeNode</span> <span style="color:#000;font-weight:bold">{</span>
        String value<span style="color:#000;font-weight:bold">;</span>
        StringBinaryTreeNode left<span style="color:#000;font-weight:bold">;</span>
        StringBinaryTreeNode right<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">DoubleBinaryTreeNode</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#458;font-weight:bold">double</span> value<span style="color:#000;font-weight:bold">;</span>
        DoubleBinaryTreeNode left<span style="color:#000;font-weight:bold">;</span>
        DoubleBinaryTreeNode right<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// 你看，上面三种&#34;二叉树节点&#34;结构相似，内容重复，请将其泛型化，以节省代码
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">BinaryTreeNode</span><span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#000;font-weight:bold">{</span>
        T value<span style="color:#000;font-weight:bold">;</span>
        BinaryTreeNode<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> left<span style="color:#000;font-weight:bold">;</span>
        BinaryTreeNode<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> right<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">// 泛型化之后，请再编写一个算法，对二叉树进行中序遍历，返回中序遍历的结果
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">inorderTraversal</span><span style="color:#000;font-weight:bold">(</span>BinaryTreeNode<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> root<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        List<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> list <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;();</span>
        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>root<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">left</span> <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
            list<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAll</span><span style="color:#000;font-weight:bold">(</span>inorderTraversal<span style="color:#000;font-weight:bold">(</span>root<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">left</span><span style="color:#000;font-weight:bold">));</span>
        <span style="color:#000;font-weight:bold">}</span>
        list<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">add</span><span style="color:#000;font-weight:bold">(</span>root<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">value</span><span style="color:#000;font-weight:bold">);</span>
        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>root<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">right</span> <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
            list<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">addAll</span><span style="color:#000;font-weight:bold">(</span>inorderTraversal<span style="color:#000;font-weight:bold">(</span>root<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">right</span><span style="color:#000;font-weight:bold">));</span>
        <span style="color:#000;font-weight:bold">}</span>
        <span style="color:#000;font-weight:bold">return</span> list<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h2 id="java中的注解">Java中的注解</h2>
<p>我们之前说了,Class对象是类的说明书,而注解就是说明书中的一小段说明信息<br>
注解只是一小段信息,至于如何处理,和注解没有半毛钱关系,如何处理它是由使用这个注解的对象决定的</p>
<h3 id="注解的创建">注解的创建</h3>
<ul>
<li>注解的创建和普通的类没有什么太大区别,关键字是<code>@interface</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#3c5d5d;font-weight:bold">@interface</span> MyAnnotation <span style="color:#000;font-weight:bold">{</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h3 id="元注解">元注解</h3>
<p>元注解就是可以放在注解上面的注解</p>
<ul>
<li>Retention <code>指定这个注解在编译后的保留等级</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">enum</span> RetentionPolicy <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * Annotations are to be discarded by the compiler.
</span><span style="color:#998;font-style:italic">     */</span>
    SOURCE<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * Annotations are to be recorded in the class file by the compiler
</span><span style="color:#998;font-style:italic">     * but need not be retained by the VM at run time.  This is the default
</span><span style="color:#998;font-style:italic">     * behavior.
</span><span style="color:#998;font-style:italic">     */</span>
    CLASS<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * Annotations are to be recorded in the class file by the compiler and
</span><span style="color:#998;font-style:italic">     * retained by the VM at run time, so they may be read reflectively.
</span><span style="color:#998;font-style:italic">     *
</span><span style="color:#998;font-style:italic">     * @see java.lang.reflect.AnnotatedElement
</span><span style="color:#998;font-style:italic">     */</span>
    RUNTIME
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>Target <code>指定这个注解可以被标注在什么东西上面</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">enum</span> ElementType <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">/** Class, interface (including annotation type), or enum declaration */</span>
    TYPE<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Field declaration (includes enum constants) */</span>
    FIELD<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Method declaration */</span>
    METHOD<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Formal parameter declaration */</span>
    PARAMETER<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Constructor declaration */</span>
    CONSTRUCTOR<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Local variable declaration */</span>
    LOCAL_VARIABLE<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Annotation type declaration */</span>
    ANNOTATION_TYPE<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/** Package declaration */</span>
    PACKAGE<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * Type parameter declaration
</span><span style="color:#998;font-style:italic">     *
</span><span style="color:#998;font-style:italic">     * @since 1.8
</span><span style="color:#998;font-style:italic">     */</span>
    TYPE_PARAMETER<span style="color:#000;font-weight:bold">,</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * Use of a type
</span><span style="color:#998;font-style:italic">     *
</span><span style="color:#998;font-style:italic">     * @since 1.8
</span><span style="color:#998;font-style:italic">     */</span>
    TYPE_USE
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>Documented <code>不常用,用@Documented注解修饰的注解类会被Javadoc工具提取成文档</code></li>
<li>Inherited <code>不常用,指定这个注解能否被子类所看到</code></li>
<li>Repeatable <code>不常用,指定这个注解是否可以被重构</code></li>
</ul>
<h3 id="注解的属性">注解的属性</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#3c5d5d;font-weight:bold">@Target</span><span style="color:#000;font-weight:bold">(</span>ElementType<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">METHOD</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">public</span> <span style="color:#3c5d5d;font-weight:bold">@interface</span> MyAnnotation <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">// 属性类型,属性名,默认值
</span><span style="color:#998;font-style:italic"></span>    String <span style="color:#900;font-weight:bold">name</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">default</span> <span style="color:#d14">&#34;Hello Annotation&#34;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#3c5d5d;font-weight:bold">@MyAnnotation</span><span style="color:#000;font-weight:bold">(</span>name <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;Jerry&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Hello World!&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h4 id="注解属性的类型可以有哪些">注解属性的类型可以有哪些?</h4>
<ul>
<li>基本数据类型+String+类以及它们的数组</li>
</ul>
<h4 id="value属性">value属性</h4>
<ul>
<li>当只有一个value属性时,调用时可以不指定属性名</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#3c5d5d;font-weight:bold">@Target</span><span style="color:#000;font-weight:bold">(</span>ElementType<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">METHOD</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">public</span> <span style="color:#3c5d5d;font-weight:bold">@interface</span> MyAnnotation <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">// 属性类型,属性名,默认值
</span><span style="color:#998;font-style:italic"></span>    String <span style="color:#900;font-weight:bold">value</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">default</span> <span style="color:#d14">&#34;Hello Annotation&#34;</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Main</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#3c5d5d;font-weight:bold">@MyAnnotation</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Jerry&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;Hello World!&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><h4 id="一些jdk自带的注解">一些JDK自带的注解</h4>
<ul>
<li>@Override <code>编译器会检查你是否覆盖了父类的方法</code></li>
<li>@Deprecated <code>编译器会标记这个方法已经过时</code></li>
<li>@SuppressWarnings <code>抑制一些警告</code></li>
<li>@FunctionalInterface <code>标记这是一个函数式接口</code></li>
</ul>
<h3 id="注解实战实现基于注解的缓存装饰器">注解实战,实现基于注解的缓存装饰器</h3>
<ul>
<li>注解和反射是分不开的</li>
<li>我们需要用到<a href="https://github.com/raphw/byte-buddy">Byte-Buddy</a>, 它有<a href="https://notes.diguage.com/byte-buddy-tutorial">中文文档</a> 在这里可以看到</li>
</ul>
<p>我们知道注解本身是不具备任何功能的,它只是一段说明,要想给注解赋予真正的功能,<br>
我们需要通过反射在运行时动态的赋予它各种能力(为什么只能在运行时动态赋予呢?)<br>
因为它本身就不具备什么功能嘛,源码层面上没有体现,这就需要在运行时动态生成代码</p>
<ul>
<li>Cache 注解</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">package</span> <span style="color:#555">com.github.hcsp.annotation</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.lang.annotation.Retention</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.lang.annotation.RetentionPolicy</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#3c5d5d;font-weight:bold">@Retention</span><span style="color:#000;font-weight:bold">(</span>RetentionPolicy<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">RUNTIME</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000;font-weight:bold">public</span> <span style="color:#3c5d5d;font-weight:bold">@interface</span> Cache <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">// 标记缓存的时长（秒），默认60s
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">cacheSeconds</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">default</span> 60<span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>CacheService</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">package</span> <span style="color:#555">com.github.hcsp.annotation</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.List</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.Random</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.stream.Collectors</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.stream.IntStream</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">DataService</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * 根据数据ID查询一列数据，有缓存。
</span><span style="color:#998;font-style:italic">     *
</span><span style="color:#998;font-style:italic">     * @param id 数据ID
</span><span style="color:#998;font-style:italic">     * @return 查询到的数据列表
</span><span style="color:#998;font-style:italic">     */</span>
    <span style="color:#3c5d5d;font-weight:bold">@Cache</span>
    <span style="color:#000;font-weight:bold">public</span> List<span style="color:#000;font-weight:bold">&lt;</span>Object<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">queryData</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> id<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#998;font-style:italic">// 模拟一个查询操作
</span><span style="color:#998;font-style:italic"></span>        Random random <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Random<span style="color:#000;font-weight:bold">();</span>
        <span style="color:#458;font-weight:bold">int</span> size <span style="color:#000;font-weight:bold">=</span> random<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">nextInt</span><span style="color:#000;font-weight:bold">(</span>10<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> 10<span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">return</span> IntStream<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">range</span><span style="color:#000;font-weight:bold">(</span>0<span style="color:#000;font-weight:bold">,</span> size<span style="color:#000;font-weight:bold">)</span>
                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">mapToObj</span><span style="color:#000;font-weight:bold">(</span>i <span style="color:#000;font-weight:bold">-&gt;</span> random<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">nextInt</span><span style="color:#000;font-weight:bold">(</span>10<span style="color:#000;font-weight:bold">))</span>
                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>Collectors<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toList</span><span style="color:#000;font-weight:bold">());</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * 根据数据ID查询一列数据，无缓存。
</span><span style="color:#998;font-style:italic">     *
</span><span style="color:#998;font-style:italic">     * @param id 数据ID
</span><span style="color:#998;font-style:italic">     * @return 查询到的数据列表
</span><span style="color:#998;font-style:italic">     */</span>
    <span style="color:#000;font-weight:bold">public</span> List<span style="color:#000;font-weight:bold">&lt;</span>Object<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">queryDataWithoutCache</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">int</span> id<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#998;font-style:italic">// 模拟一个查询操作
</span><span style="color:#998;font-style:italic"></span>        Random random <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> Random<span style="color:#000;font-weight:bold">();</span>
        <span style="color:#458;font-weight:bold">int</span> size <span style="color:#000;font-weight:bold">=</span> random<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">nextInt</span><span style="color:#000;font-weight:bold">(</span>10<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">+</span> 1<span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">return</span> IntStream<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">range</span><span style="color:#000;font-weight:bold">(</span>0<span style="color:#000;font-weight:bold">,</span> size<span style="color:#000;font-weight:bold">)</span>
                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">mapToObj</span><span style="color:#000;font-weight:bold">(</span>i <span style="color:#000;font-weight:bold">-&gt;</span> random<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">nextBoolean</span><span style="color:#000;font-weight:bold">())</span>
                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">collect</span><span style="color:#000;font-weight:bold">(</span>Collectors<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">toList</span><span style="color:#000;font-weight:bold">());</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>CacheClassDecorator 实现@Cache注解</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">package</span> <span style="color:#555">com.github.hcsp.annotation</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.ByteBuddy</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.implementation.MethodDelegation</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.implementation.bind.annotation.AllArguments</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.implementation.bind.annotation.Origin</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.implementation.bind.annotation.RuntimeType</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.implementation.bind.annotation.SuperCall</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.implementation.bind.annotation.This</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">net.bytebuddy.matcher.ElementMatchers</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.lang.reflect.Method</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.concurrent.Callable</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.concurrent.ConcurrentHashMap</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">CacheClassDecorator</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#998;font-style:italic">// 将传入的服务类Class进行增强
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// 使得返回一个具有如下功能的Class：
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// 如果某个方法标注了@Cache注解，则返回值能够被自动缓存注解所指定的时长
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// 这意味着，在短时间内调用同一个服务的同一个@Cache方法两次
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// 它实际上只被调用一次，第二次的结果直接从缓存中获取
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#998;font-style:italic">// 注意，缓存的实现需要是线程安全的
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#3c5d5d;font-weight:bold">@SuppressWarnings</span><span style="color:#000;font-weight:bold">(</span><span style="color:#d14">&#34;unchecked&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> Class<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> <span style="color:#900;font-weight:bold">decorate</span><span style="color:#000;font-weight:bold">(</span>Class<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;</span> klass<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">(</span>Class<span style="color:#000;font-weight:bold">&lt;</span>T<span style="color:#000;font-weight:bold">&gt;)</span> <span style="color:#000;font-weight:bold">new</span> ByteBuddy<span style="color:#000;font-weight:bold">()</span>
                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">subclass</span><span style="color:#000;font-weight:bold">(</span>klass<span style="color:#000;font-weight:bold">)</span> <span style="color:#998;font-style:italic">// 动态创建一个klass的子类,因为你要扩展klass嘛,因此你肯定需要一个子类
</span><span style="color:#998;font-style:italic">//                .method(methodDescription -&gt; klass.getAnnotation(Cache.class) != null) // 过滤出所有带有@Cache注解的方法
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">method</span><span style="color:#000;font-weight:bold">(</span>ElementMatchers<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">isAnnotatedWith</span><span style="color:#000;font-weight:bold">(</span>Cache<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#998;font-style:italic">// 这句和上面的意思一样
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">intercept</span><span style="color:#000;font-weight:bold">(</span>MethodDelegation<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">to</span><span style="color:#000;font-weight:bold">(</span>Target<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#998;font-style:italic">// 拦截这些方法并委托给谁处理
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">make</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#998;font-style:italic">// 创建出这个Class对象
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">load</span><span style="color:#000;font-weight:bold">(</span>klass<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getClassLoader</span><span style="color:#000;font-weight:bold">())</span>  <span style="color:#998;font-style:italic">// 让ClassLoader加载它
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getLoaded</span><span style="color:#000;font-weight:bold">();</span> <span style="color:#998;font-style:italic">// 返回加载后的Class对象
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Target</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">private</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#000;font-weight:bold">final</span> ConcurrentHashMap<span style="color:#000;font-weight:bold">&lt;</span>CacheK<span style="color:#000;font-weight:bold">,</span> CacheV<span style="color:#000;font-weight:bold">&gt;</span> cache <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> ConcurrentHashMap<span style="color:#000;font-weight:bold">&lt;&gt;();</span>

        <span style="color:#3c5d5d;font-weight:bold">@RuntimeType</span> <span style="color:#998;font-style:italic">// 这个注解指定当发生委托时,要调用这个方法,如果你不想加这个注解,那必须保证方法的返回值和被拦截的方法返回值一致(目前我看到的是这样)
</span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> Object <span style="color:#900;font-weight:bold">intercept</span><span style="color:#000;font-weight:bold">(</span>
                <span style="color:#3c5d5d;font-weight:bold">@SuperCall</span> Callable<span style="color:#000;font-weight:bold">&lt;</span>Object<span style="color:#000;font-weight:bold">&gt;</span> supperCall<span style="color:#000;font-weight:bold">,</span> <span style="color:#998;font-style:italic">// 既然我们这个Class是继承的klass,那么我们通过这个参数就能调用父类的方法
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#3c5d5d;font-weight:bold">@Origin</span> Method method<span style="color:#000;font-weight:bold">,</span> <span style="color:#998;font-style:italic">// 当委托发生的时候,可以拿到当前被调用的方法(换句话说就是,调用哪个方法的时候发生了这个委托)
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#3c5d5d;font-weight:bold">@This</span> Object thisObject<span style="color:#000;font-weight:bold">,</span> <span style="color:#998;font-style:italic">// 哪个对象调用了这个方法
</span><span style="color:#998;font-style:italic"></span>                <span style="color:#3c5d5d;font-weight:bold">@AllArguments</span> Object<span style="color:#000;font-weight:bold">[]</span> allArguments <span style="color:#998;font-style:italic">// 可以拿到所有的参数
</span><span style="color:#998;font-style:italic"></span>        <span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">throws</span> Exception <span style="color:#000;font-weight:bold">{</span>
            CacheK key <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> CacheK<span style="color:#000;font-weight:bold">(</span>thisObject<span style="color:#000;font-weight:bold">,</span> method<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getName</span><span style="color:#000;font-weight:bold">(),</span> allArguments<span style="color:#000;font-weight:bold">);</span>
            CacheV cached <span style="color:#000;font-weight:bold">=</span> cache<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">get</span><span style="color:#000;font-weight:bold">(</span>key<span style="color:#000;font-weight:bold">);</span>
            <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>cached <span style="color:#000;font-weight:bold">!=</span> <span style="color:#000;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
                <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">currentTimeMillis</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">-</span> cached<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getTime</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">&gt;</span> method<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getAnnotation</span><span style="color:#000;font-weight:bold">(</span>Cache<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">cacheSeconds</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">*</span> 1000L<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
                    <span style="color:#000;font-weight:bold">return</span> cacheValue<span style="color:#000;font-weight:bold">(</span>supperCall<span style="color:#000;font-weight:bold">,</span> key<span style="color:#000;font-weight:bold">);</span>
                <span style="color:#000;font-weight:bold">}</span>
                <span style="color:#000;font-weight:bold">return</span> cached<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">();</span>
            <span style="color:#000;font-weight:bold">}</span>
            <span style="color:#000;font-weight:bold">return</span> cacheValue<span style="color:#000;font-weight:bold">(</span>supperCall<span style="color:#000;font-weight:bold">,</span> key<span style="color:#000;font-weight:bold">);</span>
        <span style="color:#000;font-weight:bold">}</span>

        <span style="color:#000;font-weight:bold">private</span> <span style="color:#000;font-weight:bold">static</span> Object <span style="color:#900;font-weight:bold">cacheValue</span><span style="color:#000;font-weight:bold">(</span>Callable<span style="color:#000;font-weight:bold">&lt;</span>Object<span style="color:#000;font-weight:bold">&gt;</span> supperCall<span style="color:#000;font-weight:bold">,</span> CacheK key<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">throws</span> Exception <span style="color:#000;font-weight:bold">{</span>
            CacheV value <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">new</span> CacheV<span style="color:#000;font-weight:bold">(</span>supperCall<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">call</span><span style="color:#000;font-weight:bold">(),</span> System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">currentTimeMillis</span><span style="color:#000;font-weight:bold">());</span>
            cache<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">put</span><span style="color:#000;font-weight:bold">(</span>key<span style="color:#000;font-weight:bold">,</span> value<span style="color:#000;font-weight:bold">);</span>
            <span style="color:#000;font-weight:bold">return</span> value<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getValue</span><span style="color:#000;font-weight:bold">();</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">main</span><span style="color:#000;font-weight:bold">(</span>String<span style="color:#000;font-weight:bold">[]</span> args<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">throws</span> Exception <span style="color:#000;font-weight:bold">{</span>
        DataService dataService <span style="color:#000;font-weight:bold">=</span> decorate<span style="color:#000;font-weight:bold">(</span>DataService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">class</span><span style="color:#000;font-weight:bold">).</span><span style="color:#008080">getConstructor</span><span style="color:#000;font-weight:bold">().</span><span style="color:#008080">newInstance</span><span style="color:#000;font-weight:bold">();</span>

        <span style="color:#998;font-style:italic">// 有缓存的查询：只有第一次执行了真正的查询操作，第二次从缓存中获取
</span><span style="color:#998;font-style:italic"></span>        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>dataService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">queryData</span><span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">));</span>
        Thread<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sleep</span><span style="color:#000;font-weight:bold">(</span>1 <span style="color:#000;font-weight:bold">*</span> 1000<span style="color:#000;font-weight:bold">);</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>dataService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">queryData</span><span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">));</span>

        <span style="color:#998;font-style:italic">// 无缓存的查询：两次都执行了真正的查询操作
</span><span style="color:#998;font-style:italic"></span>        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>dataService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">queryDataWithoutCache</span><span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">));</span>
        Thread<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">sleep</span><span style="color:#000;font-weight:bold">(</span>1 <span style="color:#000;font-weight:bold">*</span> 1000<span style="color:#000;font-weight:bold">);</span>
        System<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">out</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">println</span><span style="color:#000;font-weight:bold">(</span>dataService<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">queryDataWithoutCache</span><span style="color:#000;font-weight:bold">(</span>1<span style="color:#000;font-weight:bold">));</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>CacheK 保存缓存的K</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">package</span> <span style="color:#555">com.github.hcsp.annotation</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.Arrays</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">import</span> <span style="color:#555">java.util.Objects</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">CacheK</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">private</span> Object object<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">private</span> String methodName<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">private</span> Object<span style="color:#000;font-weight:bold">[]</span> allArguments<span style="color:#000;font-weight:bold">;</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">CacheK</span><span style="color:#000;font-weight:bold">(</span>Object object<span style="color:#000;font-weight:bold">,</span> String methodName<span style="color:#000;font-weight:bold">,</span> Object<span style="color:#000;font-weight:bold">[]</span> allArguments<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">object</span> <span style="color:#000;font-weight:bold">=</span> object<span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">methodName</span> <span style="color:#000;font-weight:bold">=</span> methodName<span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">allArguments</span> <span style="color:#000;font-weight:bold">=</span> allArguments<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#3c5d5d;font-weight:bold">@Override</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">boolean</span> <span style="color:#900;font-weight:bold">equals</span><span style="color:#000;font-weight:bold">(</span>Object o<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">this</span> <span style="color:#000;font-weight:bold">==</span> o<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">true</span><span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">}</span>
        <span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">(</span>o <span style="color:#000;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">null</span> <span style="color:#000;font-weight:bold">||</span> getClass<span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">!=</span> o<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">getClass</span><span style="color:#000;font-weight:bold">())</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#000;font-weight:bold">return</span> <span style="color:#000;font-weight:bold">false</span><span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">}</span>
        CacheK cacheK <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>CacheK<span style="color:#000;font-weight:bold">)</span> o<span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">return</span> Objects<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>object<span style="color:#000;font-weight:bold">,</span> cacheK<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">object</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> Objects<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>methodName<span style="color:#000;font-weight:bold">,</span> cacheK<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">methodName</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> Arrays<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">equals</span><span style="color:#000;font-weight:bold">(</span>allArguments<span style="color:#000;font-weight:bold">,</span> cacheK<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">allArguments</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#3c5d5d;font-weight:bold">@Override</span>
    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">hashCode</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#458;font-weight:bold">int</span> result <span style="color:#000;font-weight:bold">=</span> Objects<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">hash</span><span style="color:#000;font-weight:bold">(</span>object<span style="color:#000;font-weight:bold">,</span> methodName<span style="color:#000;font-weight:bold">);</span>
        result <span style="color:#000;font-weight:bold">=</span> 31 <span style="color:#000;font-weight:bold">*</span> result <span style="color:#000;font-weight:bold">+</span> Arrays<span style="color:#000;font-weight:bold">.</span><span style="color:#008080">hashCode</span><span style="color:#000;font-weight:bold">(</span>allArguments<span style="color:#000;font-weight:bold">);</span>
        <span style="color:#000;font-weight:bold">return</span> result<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><ul>
<li>CacheV 保存缓存的值和缓存时间</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#000;font-weight:bold">package</span> <span style="color:#555">com.github.hcsp.annotation</span><span style="color:#000;font-weight:bold">;</span>

<span style="color:#000;font-weight:bold">public</span> <span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">CacheV</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000;font-weight:bold">private</span> Object value<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">private</span> <span style="color:#458;font-weight:bold">long</span> time<span style="color:#000;font-weight:bold">;</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#900;font-weight:bold">CacheV</span><span style="color:#000;font-weight:bold">(</span>Object value<span style="color:#000;font-weight:bold">,</span> <span style="color:#458;font-weight:bold">long</span> time<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">value</span> <span style="color:#000;font-weight:bold">=</span> value<span style="color:#000;font-weight:bold">;</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">time</span> <span style="color:#000;font-weight:bold">=</span> time<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">public</span> Object <span style="color:#900;font-weight:bold">getValue</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> value<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">setValue</span><span style="color:#000;font-weight:bold">(</span>Object value<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">value</span> <span style="color:#000;font-weight:bold">=</span> value<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">long</span> <span style="color:#900;font-weight:bold">getTime</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">return</span> time<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#000;font-weight:bold">public</span> <span style="color:#458;font-weight:bold">void</span> <span style="color:#900;font-weight:bold">setTime</span><span style="color:#000;font-weight:bold">(</span><span style="color:#458;font-weight:bold">long</span> time<span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#000;font-weight:bold">this</span><span style="color:#000;font-weight:bold">.</span><span style="color:#008080">time</span> <span style="color:#000;font-weight:bold">=</span> time<span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div>
    </div>
  </article>

  
  




  <div class="blog-post-comments">
    
      <div id="disquss_thread">
  <script src="https://utteranc.es/client.js"
    repo="Wjinlei/wjinlei.github.io"
    issue-term="pathname"
    label="Wjinlei"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
</div>

    
  </div>



  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Writings</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&text=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&title=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&is_video=false&description=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29&body=Check out this article: https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&title=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&title=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&name=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29&description=%e6%b3%9b%e5%9e%8b%20%e4%b8%ba%e4%bb%80%e4%b9%88%e9%9c%80%e8%a6%81%e6%b3%9b%e5%9e%8b%20%e4%b8%bb%e8%a6%81%e6%98%af%e4%b8%ba%e4%ba%86%e5%ae%9e%e7%8e%b0%e7%b1%bb%e5%9e%8b%e5%ae%89%e5%85%a8%2c%e4%bb%a5%e5%8f%8a%e4%bd%bf%e7%94%a8%e6%97%b6%e7%9a%84%e4%b8%80%e7%82%b9%e7%82%b9%e6%96%b9%e4%be%bf%28%e4%b8%8d%e9%9c%80%e8%a6%81%e5%86%8d%e8%bd%ac%e6%8d%a2%e7%b1%bb%e5%9e%8b%29%2c%e5%85%83%e7%b4%a0%e6%8b%bf%e5%87%ba%e6%9d%a5%e5%b0%b1%e5%8f%af%e4%bb%a5%e7%9b%b4%e6%8e%a5%e7%94%a8%0a%e4%bb%80%e4%b9%88%e6%98%af%e6%b3%9b%e5%9e%8b%20%20%e8%a7%84%e5%ae%9a%e8%bf%99%e4%b8%aa%e5%ae%b9%e5%99%a8%e5%8f%aa%e8%83%bd%e8%a3%85%e4%bb%80%e4%b9%88%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e6%8d%ae%28%e5%85%83%e7%b4%a0%29%20%20List%26lt%3bString%26gt%3b%20list%20%3d%20new%20ArrayList%26lt%3b%26gt%3b%28%29%3b%20%2f%2f%20%e5%8f%aa%e8%83%bd%e8%a3%85String%e7%b1%bb%e5%9e%8b%e7%9a%84%e5%ae%b9%e5%99%a8%20%e6%b3%9b%e5%9e%8b%e6%93%a6%e9%99%a4%20Java%e7%9a%84%e6%b3%9b%e5%9e%8b%e6%98%af%e5%9c%a8%e7%bc%96%e8%af%91%e6%97%b6%e6%9c%9f%e8%a7%84%e5%ae%9a%e8%bf%99%e4%b8%aa%e5%ae%b9%e5%99%a8%e5%8f%aa%e8%83%bd%e8%a3%85%e4%bb%80%e4%b9%88%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e6%8d%ae%e7%9a%84%2c%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e5%af%b9%e4%ba%8eJVM%e6%9d%a5%e8%af%b4%2c%e6%98%af%e6%b2%a1%e6%9c%89%e6%b3%9b%e5%9e%8b%e8%bf%99%e4%b8%aa%e5%8c%ba%e5%88%ab%e7%9a%84%0a%e5%9b%a0%e4%b8%ba%e4%bd%a0%e5%9c%a8%e7%bc%96%e8%af%91%e6%97%b6%e6%9c%9f%e6%b7%bb%e5%8a%a0%e5%85%83%e7%b4%a0%e7%9a%84%e6%97%b6%e5%80%99%2c%e5%b7%b2%e7%bb%8f%e9%99%90%e5%ae%9a%e4%ba%86%e5%ae%83%e4%bb%ac%e9%83%bd%e6%98%af%e5%90%8c%e4%b8%80%e4%b8%aa%e7%b1%bb%e5%9e%8b%e7%9a%84%2c%e5%9b%a0%e6%ad%a4%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%2c%e6%98%af%e4%b8%8d%e5%ad%98%e5%9c%a8%e7%b1%bb%e5%9e%8b%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98%e7%9a%84%2c%0a%e6%89%80%e4%bb%a5%2c%e5%9c%a8%e8%bf%90%e8%a1%8c%e6%97%b6%2cJVM%e4%bc%9a%e6%93%a6%e9%99%a4%e6%8e%89%e6%b3%9b%e5%9e%8b%e9%99%90%e5%ae%9a%2c%e8%bf%99%e4%b8%aa%e5%8f%ab%e5%81%9a%e6%b3%9b%e5%9e%8b%e7%9a%84%e6%93%a6%e9%99%a4%0a%e6%93%a6%e9%99%a4%e5%b8%a6%e6%9d%a5%e7%9a%84%e9%97%ae%e9%a2%98%20%20Java%e7%9a%84%e6%b3%9b%e5%9e%8b%e6%98%af%e5%81%87%e6%b3%9b%e5%9e%8b%2c%e5%ae%83%e5%8f%aa%e5%9c%a8%e7%bc%96%e8%af%91%e6%9c%9f%e6%9c%89%e6%95%88%2c%e8%bf%90%e8%a1%8c%e6%97%b6%e6%9c%9f%e5%ae%8c%e5%85%a8%e4%b8%8d%e4%bf%9d%e7%95%99%2c%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e6%b3%9b%e5%9e%8b%e7%9a%84%e6%93%a6%e9%99%a4%e6%9d%a5%e7%bb%95%e8%bf%87%e7%bc%96%e8%af%91%e5%99%a8%e7%9a%84%e6%a3%80%e6%9f%a5%20%20public%20class%20Main%20%7b%20public%20static%20void%20main%28String%5b%5d%20args%29%20%7b%20%2f%2a%20%e6%9c%ac%e6%9d%a5list%e5%8f%aa%e8%83%bd%e8%a3%85String%e7%b1%bb%e5%9e%8b%2c%e4%bd%86%e9%80%9a%e8%bf%87%e6%b3%9b%e5%9e%8b%e6%93%a6%e9%99%a4%e7%bb%95%e8%bf%87%e4%ba%86%e7%bc%96%e8%af%91%e5%99%a8%e7%9a%84%e6%a3%80%e6%9f%a5%20%e6%b7%bb%e5%8a%a0%e4%ba%86%e5%85%b6%e4%bb%96%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%95%b0%e6%8d%ae%2c%e8%bf%99%e6%98%af%e5%be%88%e5%8d%b1%e9%99%a9%e7%9a%84%2c%e8%bf%99%e5%b0%b1%e6%98%af%e6%b3%9b%e5%9e%8b%e6%93%a6%e9%99%a4%e5%b8%a6%e6%9d%a5%e7%9a%84%e9%97%ae%e9%a2%98%20%2a%2f%20ArrayList%26lt%3bString%26gt%3b%20list%20%3d%20new%20ArrayList%26lt%3b%26gt%3b%28%29%3b%20ArrayList%20raw%20%3d%20list%3b%20raw.add%281%29%3b%20raw.add%28new%20Object%28%29%29%3b%20ArrayList%26lt%3bString%26gt%3b%20newList%20%3d%20list%3b%20System.out.println%28list.get%280%29%29%3b%20%7d%20%7d%20%20ArrayList%e4%b8%8d%e6%98%af%20ArrayList%e7%9a%84%e5%ad%90%e7%b1%bb%20%20public%20class%20Main%20%7b%20public%20static%20void%20main%28String%5b%5d%20args%29%20%7b%20ArrayList%26lt%3bString%26gt%3b%20arrayList%20%3d%20new%20ArrayList%26lt%3b%26gt%3b%28%29%3b%20arrayList." aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwjinlei.github.io%2fposts%2fexp-java-day24%2f&t=Java%e5%ad%a6%e4%b9%a0%e7%ac%94%e8%ae%b0%28%e7%ac%ac%e4%ba%8c%e5%8d%81%e5%9b%9b%e5%a4%a9%29" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2021  this 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Writings</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>




</html>
